# git的使用

## 1. git的安装

对于安装，主要还是针对于window系统，会使用Linux的也不可能不会安装git，所以这里主要是针对于window系统的安装。

1. 找到[git下载地址](https://git-scm.com/download/win)，下载git的安装包，然后双击安装，选择了安装路径之后一直确定就行了。

2. 安装完成之后，打开cmd，输入`git --version`，如果出现版本号，说明安装成功。

3. 如果没有出现，找到git的安装目录安装根目录下的bin，我这里的完整路径是`D:\Git\bin`，复制这个路径，然后右键win菜单键（下方任务栏的那个四个方块那个按钮），选择系统，然后选择左侧的高级系统设置，然后选择环境变量，然后在系统变量中找到path（哪个path都可以），然后点击编辑，然后新建，然后粘贴刚才复制的路径，然后确定，然后确定，然后确定。

4. 然后再次打开cmd，输入`git --version`，如果出现版本号，说明安装成功。

tips: 使用`win+r`打开运行窗口，输入`cmd`，打开命令行窗口(cmd, Command Prompt)

## 2. git简介

git是一个目前非常流行的版本管理工具。

### 什么是版本管理

日常生活我们经常会修改文件，但是改来改去发现可能还不如第一个，但是第一个可能被我们删除或者覆盖了，这个时候版本管理就是非常有必要的。最开始我们会通过复制备份的方式保存当前版本，但是这样的方式非常不好，因为文件多了之后，我们很难找到我们想要的版本，git就是用来解决这个问题的。

### 图形化的说明

下载了git之后，打开软件是一个黑色的窗口，这个窗口是一个命令行窗口，对于不熟悉命令行的人来说，这个窗口是非常不友好的，所以我们需要一个图形化的工具来帮助我们使用git，但是很多图形化的git都是英文。但是对于程序员，我们不需要额外安装界面工具，现在大部分的编辑器都有git的插件，包括vscode，vs，clion，pycharm，intellij idea等等。但是如果是其他需要使用git的人（在我们团队中，做结构设计的可能也需要使用git，方便团队内进行技术交流），也可以使用vscode，因为vscode是一个非常轻量级的编辑器，而且功能非常强大，而且支持中文。

当然，如果确实需要一个图形化的工具，[sourcetree](https://product-downloads.atlassian.com/software/sourcetree/windows/ga/SourceTreeSetup-3.4.22.exe)支持中文，是一个非常好的选择。

## 3. git的使用

**不要在仓库里面初始化仓库，初始化仓库之前要检查这个文件夹里面有没有`.git`文件夹，有的话就不要初始化了**

### 命令行的使用

对于程序员，只会使用编辑器自带的图形化是不够的，很难清楚推送和合并过程中报错内容，所以我们需要学会使用命令行（图形化就不在这里多说了）。

有关于仓库初始化（init）、提交（commit）、暂存（add）、变基（rebase）、合并（marge）就不再讲其命令行的使用（因为编辑器的这些功能都很好用，没有必要用命令行折磨自己）

1. 克隆

    克隆一个仓库到本地，使用`git clone <url>`，其中`<url>`是仓库的地址，可以是http或者ssh的地址。

    这个地址在github仓库界面的右侧`code`按钮下的地址栏中可以找到。

    ```shell
    git clone <url>
    ```

2. 拉取并合并（不建议使用）

    拉取远程仓库的更新，使用`git pull`，这个命令会拉取远程仓库的更新到本地。

    这个操作是会进行合并的，默认是merge合并，如果有冲突，需要手动解决冲突。

    ```shell
    git pull
    ```

3. 拉取（不合并）

    拉取远程仓库的更新，使用`git fetch`，这个命令会拉取远程仓库的更新到本地。

    这个操作是不会进行合并的，只是拉取远程仓库的更新到本地。变基或者合并之前都要进行这个操作。

    ```shell
    git fetch
    ```

4. 添加远程

    添加远程仓库，使用`git remote add <name> <url>`，其中`<name>`是远程仓库的名字，`<url>`是远程仓库的地址。

    这个操作是为了方便我们进行拉取和推送。

    ```shell
    git remote add <name> <url>
    ```

    为了方便识别，一般我会用以下命令来添加github的ssh地址

    ```shell
    git remote add github-ssh git@<...>
    ```

    这个github-ssh是用于识别这个远程仓库的名字，git@<...>是github的ssh地址。

5. 删除远程

    删除远程仓库，使用`git remote remove <name>`，其中`<name>`是远程仓库的名字，与上面的那个`name`是一样的

    这个操作是为了方便我们进行拉取和推送。

    ```shell
    git remote remove <name>
    ```

6. 查看远程

    查看远程仓库，使用`git remote -v`，这个命令会列出所有的远程仓库。

    ```shell
    git remote -v
    ```

    也可以使用`git remote show`来查看有哪些远程仓库，显示的是添加的仓库名

    ```shell
    git remote show
    ```

7. 推送

    推送本地仓库的更新到远程仓库，使用`git push <name> <branch>`，其中`<name>`是远程仓库的名字，`<branch>`是分支的名字。

    这个操作是为了将本地仓库的更新推送到远程仓库。

    ```shell
    git push <name> <branch>
    ```

    一般我会使用以下命令来推送到github的master分支

    ```shell
    git push github-ssh master
    ```

    如果不给出分支名，那么默认是推送当前分支到远程仓库的当前分支。

    ```shell
    git push
    ```

    如果有多个远程，都想推送，可以使用`--all`参数

    ```shell
    git push --all
    ```

    如果所有分支都想推送，可以使用`--mirror`参数

    ```shell
    git push --mirror
    ```

    如果推送过程发生报错，先使用`git pull`进行拉取，如果还是报错，使用`git fetch`拉取之后再进行rebase、marge合并即可，一般的问题都是远程与本地产生冲突导致

8. 修改远程

    修改远程仓库的地址，使用`git remote set-url <name> <url>`，其中`<name>`是远程仓库的名字，`<url>`是远程仓库的地址。

    这个操作是为了修改远程仓库的地址。

    ```shell
    git remote set-url <name> <url>
    ```

其他的命令大部分都可以使用编辑器的图形化界面来进行操作，这里就不再赘述了。

### 图形化的使用

#### 主页

打开软件，上方5个大按钮分别是

- Local
- Remote
- Clone
- Add
- Create

1. **Create**：这个是用来创建一个新的仓库的，点击这个按钮，然后选择一个文件夹，然后点击确定，就会在这个文件夹下创建一个新的仓库。

2. **Add**：这个是用来添加一个已经存在的仓库的，点击这个按钮，然后选择一个文件夹，然后点击确定，就会在软件的主页上显示这个仓库。

3. **Clone**：这个是用来克隆一个远程仓库的，点击这个按钮，然后输入远程仓库的地址，然后选择一个文件夹，然后点击确定，就会在这个文件夹下克隆一个远程仓库。其实就是下载一个远程仓库到本地。

4. **Local**：这个是用来查看本地仓库的，点击这个按钮，然后选择一个仓库，就会显示这个仓库的所有文件。这个也是软件的主页

5. **Remote**：这个是用来查看远程仓库的，这个需要进行仓库登录，一般使用的github。添加一个账户，托管服务商使用github，协议可以使用ssh和https，ssh需要额外配置，在[ssh使用](./../ssh_about/README.md)内。验证使用OAuth，然后刷新令牌，确定即可。然后可以看到用户之下的所有仓库

#### 仓库内

在**Local**双击一个仓库，进入到仓库界面

1. 提交

    在仓库内如果有文件发生了变化，会出现在**未暂存文件**中，提交需要将文件进行暂存，然后再提交。

    点击文件右边的`+`，将文件暂存，然后在下方的的文字输入框输入提交信息（用于提示这个提交完成了什么事情，可以说：修改了……的问题）。然后点右侧的提交

2. 修改提交

    如果上一次的提交有问题，可以再次进行暂存（如果只是修改提交信息也可以不暂存），然后写上新的提交信息，在`提交选项`选择`修改上一次提交`，然后提交即可。

3. 拉取

    上方的`拉取`按钮是会将代码与远程的仓库进行合并的，默认合并方式是`merge`，如果有冲突，需要手动解决冲突。

4. 获取

    上方的`获取`按钮是不会将代码与远程的仓库进行合并的，只是将远程的仓库拉取到本地，不会进行合并。

5. 推送

    上方的`推送`按钮是将本地的仓库推送到远程的仓库.

6. 新建分支

    上方的`分支`按钮可以用于新建分支，输入分支名，然后确定即可。

7. 删除分支

    上方的`分支`按钮也可以用于删除分支，点击`分支`之后，选择`删除分支`，选择要删除的分支删除即可。

8. 合并分支

    不熟悉合并就不用管了，直接使用`拉取`即可。这个还是建议看一下git相关概念的视频，理解了合并之后才能更好的使用合并。

9. 切换分支

    点击左侧的`分支`下的其他分支即可进行切换

10. 查看提交记录

    点击左侧`WORKSPACE`下的`History`可以查看提交记录，点击某个提交记录可以查看这个提交记录的详细信息。

其他的不用管